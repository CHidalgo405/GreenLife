<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title class="title">
      <img src="/assets/logo.png" alt="Logo" class="logo">
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card *ngIf="userId">
    <ion-card-header>
      <ion-card-title>Información del Perfil</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="profile-image-container">
        <img [src]="profileImage" alt="Foto de perfil" class="profile-image" />
      </div>
      <form [formGroup]="profileForm">
        <ion-item>
          <ion-label position="floating">Nombre</ion-label>
          <ion-input formControlName="nombre"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Apellido Paterno</ion-label>
          <ion-input formControlName="appaterno"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Apellido Materno</ion-label>
          <ion-input formControlName="apmaterno"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Correo</ion-label>
          <ion-input formControlName="correo" readonly></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Dirección</ion-label>
          <ion-input formControlName="direccion"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="floating">Fecha de Nacimiento</ion-label>
          <ion-datetime formControlName="fechanacimiento" display-format="YYYY-MM-DD"></ion-datetime>
        </ion-item>
      </form>
      <ion-button expand="block" (click)="toggleEdit()" *ngIf="!isEditing">Editar Perfil</ion-button>
      <ion-button expand="block" (click)="saveProfile()" *ngIf="isEditing" [disabled]="!profileForm.valid">Guardar Cambios</ion-button>
      <ion-button expand="block" color="light" (click)="toggleEdit()" *ngIf="isEditing">Cancelar</ion-button>
      <ion-button expand="block" color="danger" (click)="deleteAccount()">Eliminar Perfil</ion-button>
      <ion-button expand="block" color="secondary" (click)="logout()">Cerrar Sesión</ion-button>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="!userId">
    <ion-card-content>
      <p>No se pudo cargar la información del perfil. Por favor, inicia sesión nuevamente.</p>
    </ion-card-content>
  </ion-card>
</ion-content>
